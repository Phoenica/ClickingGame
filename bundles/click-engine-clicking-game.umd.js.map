{"version":3,"file":"click-engine-clicking-game.umd.js.map","sources":["ng://@click-engine/clicking-game/project-lib.ts","ng://@click-engine/clicking-game/components/clicking-game/types.ts","ng://@click-engine/clicking-game/components/clicking-game/clicking-game.component.ts","ng://@click-engine/clicking-game/clicking-game.module.ts"],"sourcesContent":["import { ClickingGameConfiguration } from './types';\r\n\r\n\r\nexport const defaultGameBoardConfiguration: ClickingGameConfiguration = {\r\n  canvasWidth: 300,\r\n  canvasHeight: 300,\r\n  groundFriction: 0.005,\r\n  gravityStrength: 0.1\r\n};\r\n","export class Ball {\r\n  x: number;\r\n  y: number;\r\n  dx: number;\r\n  dy: number;\r\n  radius: number;\r\n  bounciness: number;\r\n\r\n  constructor(x: number, y: number, radius: number, dx = 0, dy = 0, bounciness = 0.8) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.radius = radius;\r\n    this.dx = dx;\r\n    this.dy = dy;\r\n    this.bounciness = bounciness;\r\n  }\r\n\r\n  draw(canvas: CanvasRenderingContext2D) {\r\n    canvas.beginPath();\r\n    canvas.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\r\n    canvas.fill();\r\n    canvas.stroke();\r\n  }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, Input, ViewChild } from '@angular/core';\r\nimport { defaultGameBoardConfiguration } from '../../project-lib';\r\nimport { ClickingGameConfiguration } from '../../types';\r\nimport { Ball } from './types';\r\n\r\n@Component({\r\n  selector: 'ce-clicking-game',\r\n  templateUrl: './clicking-game.component.html',\r\n  styleUrls: ['./clicking-game.component.scss']\r\n})\r\nexport class ClickingGameComponent implements AfterViewInit {\r\n  @Input() gameBoardConfiguration: ClickingGameConfiguration;\r\n\r\n  @ViewChild('gameBoard') canvas: ElementRef<HTMLCanvasElement>;\r\n\r\n  balls: Ball[] = [];\r\n  config: ClickingGameConfiguration;\r\n\r\n  ngAfterViewInit(): void {\r\n    if (!this.canvas) {\r\n      return;\r\n    }\r\n\r\n    this.config = {...defaultGameBoardConfiguration, ...this.gameBoardConfiguration};\r\n\r\n    this.canvas.nativeElement.width = this.config.canvasWidth;\r\n    this.canvas.nativeElement.height = this.config.canvasHeight;\r\n\r\n    this.updateRender();\r\n  }\r\n\r\n  onClick($event: MouseEvent) {\r\n    const newBall = new Ball(\r\n        $event.x,\r\n        $event.y,\r\n        5,\r\n        16 * (Math.random() - 0.5),\r\n        -8 * (Math.random()),\r\n        (Math.random() * 5.9 + 4) / 10);\r\n\r\n    this.balls = [...this.balls, newBall];\r\n  }\r\n\r\n  calculateGravityEffect(balls: Ball[]) {\r\n    balls.forEach(ball => {\r\n      ball.dy += this.config.gravityStrength;\r\n    });\r\n  }\r\n\r\n  calculateMotion(balls: Ball[]) {\r\n    balls.forEach(ball => {\r\n      ball.x += ball.dx;\r\n      ball.y += ball.dy;\r\n    });\r\n  }\r\n\r\n  resolveWallCollisions(balls: Ball[]) {\r\n    const maxWidth = this.config.canvasWidth;\r\n    const maxHeight = this.config.canvasHeight;\r\n    const friction = this.config.groundFriction;\r\n\r\n    balls.forEach(ball => {\r\n      ball.x = (ball.x - ball.radius < 0) ? ball.radius : ball.x;\r\n      ball.x = (ball.x + ball.radius > maxWidth) ? maxWidth - ball.radius : ball.x;\r\n      ball.y = (ball.y - ball.radius < 0) ? ball.radius : ball.y;\r\n      ball.y = (ball.y + ball.radius > maxHeight) ? maxHeight - ball.radius : ball.y;\r\n\r\n      ball.dy = (ball.y === ball.radius || ball.y === maxHeight - ball.radius) ? -ball.bounciness * ball.dy : ball.dy;\r\n      ball.dx = (ball.x === ball.radius || ball.x === maxWidth - ball.radius) ? -ball.bounciness * ball.dx : ball.dx;\r\n\r\n      ball.dx = (ball.y === maxHeight - ball.radius) ? ball.dx * (1 - friction) : ball.dx;\r\n    });\r\n  }\r\n\r\n  updateRender() {\r\n    const canvasContext = this.canvas.nativeElement.getContext('2d');\r\n\r\n    canvasContext.clearRect(0, 0, this.config.canvasWidth, this.config.canvasHeight);\r\n    this.calculateGravityEffect(this.balls);\r\n    this.calculateMotion(this.balls);\r\n    this.resolveWallCollisions(this.balls);\r\n\r\n    this.balls.forEach(ball => ball.draw(canvasContext));\r\n\r\n    requestAnimationFrame(this.updateRender.bind(this));\r\n  }\r\n}\r\n\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { ClickingGameComponent } from './components/clicking-game/clicking-game.component';\r\n\r\n@NgModule({\r\n  declarations: [ClickingGameComponent],\r\n  exports: [ClickingGameComponent]\r\n})\r\nexport class ClickingGameModule { }\r\n\r\nexport { ClickingGameComponent };\r\n"],"names":["Component","Input","ViewChild","NgModule"],"mappings":"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"}
